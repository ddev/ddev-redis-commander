name: redis-commander

dependencies:
  - redis

project_files:
  - docker-compose.redis-commander.yaml
  - docker-compose.redis-commander_norouter.yaml
  - commands/host/redis-commander

ddev_version_constraint: '>= v1.24.3'

post_install_actions:
  - |
    #ddev-description:If router disabled, directly expose port
    if ( {{ contains "ddev-router" (list .DdevGlobalConfig.omit_containers | toString) }} ); then
      printf "#ddev-generated\nservices:\n  redis-commander:\n    ports:\n      - 1358:1358\n" > docker-compose.redis-commander_norouter.yaml
    fi
  - |
    echo "You can now use 'ddev redis-commander' to launch Redis Commander UI"
